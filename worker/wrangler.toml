name = "omni"
main = "index.ts"
compatibility_date = "2026-01-20"
compatibility_flags = ["nodejs_compat"]

[vars]
ALLOWED_TG_GROUPS = "-1002020976796"
ALLOWED_TG_IDS = "187873791,8017190401,8121252687,396261652,799083028,8092742155,8002966531,885404554,241569179,8099465395,7933987991,7668989544,400245877,143810424,231772128,611542587,138724443,377852977"
PUBLIC_BASE_URL="https://omni.yt-sales-bot.workers.dev"
IMAGE_RETENTION_DAYS="7"
COMMIT_HASH = "local"
CRON_STATUS_CHAT_ID = "-5078170704"
CRON_STATUS_ENABLED = "1"
DEBUG_LOGS = "1"
DEFAULT_ISSUE_PREFIX = "PROJ"
DEFAULT_TRACKER_QUEUE = "PROJ"
INSTANCE_ID = "local"
JIRA_BASE_URL = "https://flomni.atlassian.net"
JIRA_BOARD_ID = "2"
JIRA_EMAIL = "abdulkadyrov@flomni.ru"
JIRA_PROJECT_KEY = "FL"
OPENAI_MODEL = "gpt-5.2"
ORCHESTRATION_PARALLELISM = "2"
ORCHESTRATION_SUBAGENT_MAX_STEPS = "3"
ORCHESTRATION_SUBAGENT_MAX_TOOL_CALLS = "4"
ORCHESTRATION_SUBAGENT_TIMEOUT_MS = "20000"
POSTHOG_API_BASE_URL = "https://eu.posthog.com"
REGION = "local"
RELEASE_VERSION = "dev"
SERVICE_NAME = "omni"
TELEGRAM_GROUP_REQUIRE_MENTION = "1"
TOOL_APPROVAL_REQUIRED = "web_search"
TOOL_APPROVAL_STORE_PATH = "data/approvals/approvals.json"
TOOL_APPROVAL_TTL_MS = "600000"
TRACKER_CLOUD_ORG_ID = "bpfd8lkv5f11dcc2t3sj"
WIKI_CLOUD_ORG_ID="bpfd8lkv5f11dcc2t3sj"
WEB_SEARCH_CONTEXT_SIZE = "low"
WEB_SEARCH_ENABLED = "1"

[observability.logs]
enabled = true
invocation_logs = true

[observability.traces]
enabled = true

[[durable_objects.bindings]]
name = "UPDATES_DO"
class_name = "TelegramUpdatesDO"

[[durable_objects.bindings]]
name = "CHANNELS_DO"
class_name = "ChannelsDO"

[[durable_objects.bindings]]
name = "CRON_DO"
class_name = "CronDO"

[[durable_objects.bindings]]
name = "GATEWAY_CONFIG_DO"
class_name = "GatewayConfigDO"

[[durable_objects.bindings]]
name = "SESSIONS_DO"
class_name = "SessionsDO"

[[r2_buckets]]
binding = "omni"
bucket_name = "omni"


[[migrations]]
tag = "v1"
new_sqlite_classes = ["TelegramUpdatesDO"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["GatewayConfigDO"]

[[migrations]]
tag = "v3"
new_sqlite_classes = ["SessionsDO", "CronDO"]

[[migrations]]
tag = "v4"
new_sqlite_classes = ["ChannelsDO"]
